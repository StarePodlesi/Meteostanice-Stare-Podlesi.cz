<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<title>Monínec – Velká sjezdovka | FIS styl</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg-main:rgba(10,16,26,0.92);
    --bg-card:rgba(18,28,44,0.95);
    --accent:#3fd0ff;
    --accent2:#4da3ff;
    --text:#f5f7ff;
    --muted:#a9b4c7;
    --danger:#ff6b6b;
    --radius:18px;
    --shadow:0 12px 30px rgba(0,0,0,0.6);
  }

  *{box-sizing:border-box;margin:0;padding:0;}

  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    background:#000; /* pod tím může běžet video nebo stream */
  }

  /* ===== OVERLAY KONTEJNER ===== */
  .moninec-overlay{
    position:fixed;
    top:4vh;
    left:4vw;
    width:340px;
    max-width:90vw;
    color:var(--text);
    z-index:9999;
    opacity:0;
    transform:translateY(-10px);
    animation:overlayIn 0.8s ease-out forwards;
    animation-delay:0.2s;
    pointer-events:none;
  }

  .overlay-inner{
    background:linear-gradient(145deg,var(--bg-main),rgba(8,14,26,0.96));
    border-radius:var(--radius);
    padding:14px 16px 16px;
    box-shadow:var(--shadow);
    backdrop-filter:blur(24px);
    border:1px solid rgba(255,255,255,0.08);
    position:relative;
    overflow:hidden;
  }

  /* šestiúhelníkové pozadí */
  .hex-bg{
    position:absolute;
    inset:-40px;
    opacity:0.16;
    background-image:
      radial-gradient(circle at 20% 10%,rgba(255,255,255,0.25) 0,transparent 50%),
      linear-gradient(60deg,rgba(255,255,255,0.16) 8%,transparent 8%,transparent 50%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.18) 58%,transparent 58%,transparent 100%),
      linear-gradient(-60deg,rgba(255,255,255,0.08) 8%,transparent 8%,transparent 50%,rgba(255,255,255,0.05) 50%,rgba(255,255,255,0.14) 58%,transparent 58%,transparent 100%);
    background-size:120px 210px;
    pointer-events:none;
  }

  .overlay-content{
    position:relative;
    z-index:1;
  }

  /* ===== HLAVIČKA ===== */
  .header-top{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:8px;
  }

  .event-logo{
    width:40px;
    height:40px;
    border-radius:50%;
    border:2px solid rgba(255,255,255,0.35);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:12px;
    text-transform:uppercase;
    letter-spacing:.08em;
    background:radial-gradient(circle at 20% 30%,rgba(255,255,255,0.7),rgba(255,255,255,0.12));
    color:#111827;
    font-weight:700;
  }

  .event-text{
    font-size:11px;
    text-transform:uppercase;
    letter-spacing:.14em;
    line-height:1.3;
    color:var(--muted);
  }

  .resort-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-top:2px;
  }

  .country-flag{
    display:flex;
    align-items:center;
    gap:6px;
    font-size:11px;
    text-transform:uppercase;
    color:var(--muted);
  }

  .country-flag img{
    width:18px;
    height:12px;
    object-fit:cover;
    border-radius:2px;
    box-shadow:0 0 0 1px rgba(0,0,0,0.4);
  }

  .resort-name{
    margin-top:4px;
    text-transform:uppercase;
    letter-spacing:.18em;
    font-weight:700;
    font-size:11px;
    padding:4px 0;
    border-top:1px solid rgba(255,255,255,0.08);
    border-bottom:1px solid rgba(255,255,255,0.08);
  }

  .resort-name span.big{
    font-size:16px;
    letter-spacing:.2em;
  }

  /* ===== BLOKY START/FINISH ===== */
  .row{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:10px;
    margin-top:10px;
  }

  .start-block,.finish-block{
    flex:1;
    background:var(--bg-card);
    border-radius:14px;
    padding:8px 10px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    box-shadow:0 8px 18px rgba(0,0,0,0.45);
  }

  .label{
    font-size:10px;
    text-transform:uppercase;
    letter-spacing:.16em;
    color:var(--accent);
    font-weight:700;
  }

  .start-info,.finish-info{
    font-size:12px;
    line-height:1.25;
    margin-top:2px;
  }

  .temp{
    font-size:15px;
    font-weight:700;
  }

  .weather-icon{
    width:40px;
    height:40px;
    flex-shrink:0;
    filter:drop-shadow(0 0 10px rgba(0,0,0,0.7));
  }

  /* ===== TRAŤ – MAPA + PROFIL ===== */
  .track-wrapper{
    margin-top:12px;
    background:var(--bg-card);
    border-radius:14px;
    padding:10px 10px 8px;
    position:relative;
    overflow:hidden;
  }

  .track-title{
    font-size:10px;
    text-transform:uppercase;
    letter-spacing:.16em;
    color:var(--muted);
    margin-bottom:6px;
  }

  .track-canvas{
    position:relative;
    height:110px;
  }

  .track-svg{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    transition:opacity .7s ease, transform .7s ease;
  }

  .track-profile{
    opacity:0;
    transform:translateY(6px);
  }

  .track-wrapper.show-profile .track-map{
    opacity:0;
    transform:translateY(-6px);
  }
  .track-wrapper.show-profile .track-profile{
    opacity:1;
    transform:translateY(0);
  }

  /* ===== DATA O TRATI ===== */
  .stats-grid{
    margin-top:10px;
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:8px 12px;
    font-size:11px;
  }

  .stat-item{
    display:flex;
    align-items:center;
    gap:6px;
    opacity:0;
    transform:translateY(4px);
    animation:statIn .6s ease forwards;
  }

  .stat-item:nth-child(1){animation-delay:.6s;}
  .stat-item:nth-child(2){animation-delay:.9s;}
  .stat-item:nth-child(3){animation-delay:1.2s;}
  .stat-item:nth-child(4){animation-delay:1.5s;}
  .stat-item:nth-child(5){animation-delay:1.8s;}

  .stat-icon{
    width:18px;
    height:18px;
    border-radius:999px;
    background:radial-gradient(circle at 30% 20%,rgba(255,255,255,0.9),rgba(64,147,255,0.7));
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 2px 6px rgba(0,0,0,0.6);
  }

  .stat-icon svg{
    width:12px;
    height:12px;
    fill:#0b1220;
  }

  .stat-label{
    color:var(--muted);
    text-transform:uppercase;
    letter-spacing:.12em;
    font-size:9px;
  }

  .stat-value{
    font-weight:600;
  }

  /* ===== ANIMACE ===== */
  @keyframes overlayIn{
    from{opacity:0;transform:translateY(-12px);}
    to{opacity:1;transform:translateY(0);}
  }

  @keyframes overlayOut{
    to{opacity:0;transform:translateY(-12px);}
  }

  @keyframes statIn{
    from{opacity:0;transform:translateY(8px);}
    to{opacity:1;transform:translateY(0);}
  }

  .overlay-hide{
    animation:overlayOut 0.9s ease forwards;
  }

  /* drobná responsivita */
  @media (max-width:480px){
    .moninec-overlay{top:3vh;left:3vw;width:92vw;}
  }
</style>
</head>
<body>

<!-- Tohle přidej přes video / stream -->
<div class="moninec-overlay" id="moninecOverlay">
  <div class="overlay-inner">
    <div class="hex-bg"></div>

    <div class="overlay-content">
      <!-- HLAVIČKA -->
      <div class="header-top">
        <div class="event-logo">FIS</div>
        <div>
          <div class="event-text">Alpské lyžování • Česká republika</div>
          <div class="resort-row">
            <div class="country-flag">
              <img src="https://flagcdn.com/w40/cz.png" alt="CZ">
              <span>CZE • MONÍNEC</span>
            </div>
          </div>
        </div>
      </div>

      <div class="resort-name">
        <span class="big">MONÍNEC</span><br>
        VELKÁ SJEZDOVKA
      </div>

      <!-- START + POČASÍ -->
      <div class="row">
        <div class="start-block">
          <div>
            <div class="label">Start</div>
            <div class="start-info">
              <div><span class="stat-label">Souřadnice</span><br>
                49.5432081 N, 14.5113658 E
              </div>
              <div style="margin-top:3px;">
                <span class="stat-label">Teplota</span><br>
                <span class="temp" id="startTemp">--°C</span>
              </div>
            </div>
          </div>
          <img class="weather-icon" id="startIcon" src="" alt="Počasí start">
        </div>
      </div>

      <!-- TRAŤ – mapa + profil -->
      <div class="track-wrapper" id="trackWrapper">
        <div class="track-title">Profil tratě • 1070 m</div>
        <div class="track-canvas">
          <!-- Mapa (pohled shora / stylizovaná stopa) -->
          <svg class="track-svg track-map" viewBox="0 0 260 120" preserveAspectRatio="none">
            <defs>
              <linearGradient id="mapGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#4da3ff"/>
                <stop offset="100%" stop-color="#0051ff"/>
              </linearGradient>
            </defs>
            <polyline
              points="10,15 60,35 120,25 170,60 220,90 250,105"
              fill="none"
              stroke="url(#mapGrad)"
              stroke-width="7"
              stroke-linecap="round"
              stroke-linejoin="round"
              opacity="0.95" />
            <!-- šipky sektorů -->
            <circle cx="60" cy="35" r="4" fill="#fff"/>
            <circle cx="120" cy="25" r="4" fill="#fff"/>
            <circle cx="170" cy="60" r="4" fill="#fff"/>
            <circle cx="220" cy="90" r="4" fill="#fff"/>
          </svg>

          <!-- Výškový profil -->
          <svg class="track-svg track-profile" viewBox="0 0 260 120" preserveAspectRatio="none">
            <defs>
              <linearGradient id="profileGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="#4da3ff"/>
                <stop offset="100%" stop-color="#001534"/>
              </linearGradient>
            </defs>
            <!-- Silueta profilu (zjednodušená) -->
            <path d="
              M10,20
              C60,25 80,35 110,50
              C150,70 190,85 230,95
              L230,110 L10,110 Z"
              fill="url(#profileGrad)" opacity="0.95" />
            <!-- rozdělení na 3 sektory -->
            <line x1="90" y1="25" x2="90" y2="110" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
            <line x1="170" y1="65" x2="170" y2="110" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
            <!-- Start a cíl -->
            <circle cx="18" cy="22" r="5" fill="#fff"/>
            <circle cx="222" cy="96" r="5" fill="#fff"/>
          </svg>
        </div>
      </div>

      <!-- STATISTIKY TRATĚ -->
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-icon">
            <!-- délka -->
            <svg viewBox="0 0 24 24">
              <path d="M4 11h16v2H4zM6 8h2v3H6zM10 8h2v3h-2zM14 8h2v3h-2zM18 8h2v3h-2z"/>
            </svg>
          </div>
          <div>
            <div class="stat-label">Délka</div>
            <div class="stat-value">1070 m</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">
            <!-- převýšení -->
            <svg viewBox="0 0 24 24">
              <path d="M5 19V5h2v10.17l9.59-9.58L18 7l-11 11z"/>
            </svg>
          </div>
          <div>
            <div class="stat-label">Převýšení</div>
            <div class="stat-value">210 m</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">
            <!-- průměrný sklon -->
            <svg viewBox="0 0 24 24">
              <path d="M4 18h16v2H4zM6 16l6-10 6 10z"/>
            </svg>
          </div>
          <div>
            <div class="stat-label">Průměrný sklon</div>
            <div class="stat-value">18&nbsp;%</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">
            <!-- max sklon -->
            <svg viewBox="0 0 24 24">
              <path d="M4 18h16v2H4zM7 16l5-12 5 12z"/>
            </svg>
          </div>
          <div>
            <div class="stat-label">Max. sklon</div>
            <div class="stat-value">31&nbsp;%</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">
            <!-- brány -->
            <svg viewBox="0 0 24 24">
              <path d="M5 4h2v16H5zM17 4h2v16h-2zM9 6h4v2H9zM9 11h4v2H9z"/>
            </svg>
          </div>
          <div>
            <div class="stat-label">Brány / objízdné</div>
            <div class="stat-value">69 / 68</div>
          </div>
        </div>
      </div>

      <!-- FINISH + POČASÍ -->
      <div class="row" style="margin-top:12px;">
        <div class="finish-block">
          <div>
            <div class="label">Cíl</div>
            <div class="finish-info">
              <div><span class="stat-label">Souřadnice</span><br>
                49.5500447 N, 14.5211678 E
              </div>
              <div style="margin-top:3px;">
                <span class="stat-label">Teplota</span><br>
                <span class="temp" id="finishTemp">--°C</span>
              </div>
            </div>
          </div>
          <img class="weather-icon" id="finishIcon" src="" alt="Počasí cíl">
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  // === Náhrada za profesionální ikonky počasí (open-source SVG) ===
  const WEATHER_ICONS = {
    clear: "https://basmilius.github.io/weather-icons/production/fill/svg/clear-day.svg",
    cloudy: "https://basmilius.github.io/weather-icons/production/fill/svg/overcast-day.svg",
    fog: "https://basmilius.github.io/weather-icons/production/fill/svg/fog-day.svg",
    rain: "https://basmilius.github.io/weather-icons/production/fill/svg/rain.svg",
    snow: "https://basmilius.github.io/weather-icons/production/fill/svg/snow.svg",
    storm: "https://basmilius.github.io/weather-icons/production/fill/svg/thunderstorms-day-snow.svg"
  };

  function mapWeatherCode(code){
    // Open-Meteo weathercode → jednoduché kategorie
    if(code === 0) return {icon:WEATHER_ICONS.clear, desc:"Jasno"};
    if([1,2,3].includes(code)) return {icon:WEATHER_ICONS.cloudy, desc:"Oblačno"};
    if([45,48].includes(code)) return {icon:WEATHER_ICONS.fog, desc:"Mlhy"};
    if([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return {icon:WEATHER_ICONS.rain, desc:"Déšť"};
    if([71,73,75,77,85,86].includes(code)) return {icon:WEATHER_ICONS.snow, desc:"Sníh"};
    if([95,96,99].includes(code)) return {icon:WEATHER_ICONS.storm, desc:"Bouřky"};
    return {icon:WEATHER_ICONS.cloudy, desc:"Počasí"};
  }

  async function loadWeather(lat, lon, tempId, iconId){
    try{
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&timezone=auto`;
      const res = await fetch(url);
      const data = await res.json();
      if(!data.current) return;
      const t = Math.round(data.current.temperature_2m);
      const code = data.current.weather_code;
      const map = mapWeatherCode(code);

      const tempEl = document.getElementById(tempId);
      const iconEl = document.getElementById(iconId);
      if(tempEl) tempEl.textContent = `${t}°C`;
      if(iconEl){
        iconEl.src = map.icon;
        iconEl.alt = map.desc;
      }
    }catch(e){
      console.error("Chyba při načítání počasí",e);
    }
  }

  // přepnutí mapa → profil po 5 s
  setTimeout(()=>{
    const wrap = document.getElementById("trackWrapper");
    if(wrap) wrap.classList.add("show-profile");
  },5000);

  // fade-out celé grafiky po 12 s
  setTimeout(()=>{
    const ov = document.getElementById("moninecOverlay");
    if(ov) ov.classList.add("overlay-hide");
  },12000);

  // načtení počasí po načtení stránky
  window.addEventListener("load",()=>{
    loadWeather(49.5432081,14.5113658,"startTemp","startIcon");
    loadWeather(49.5500447,14.5211678,"finishTemp","finishIcon");
  });
</script>
</body>
</html>
