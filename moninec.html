<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<title>Mon√≠nec ‚Äî FIS styl overlay</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#050814;
  --card-bg:rgba(6,10,24,0.92);
  --accent:#ffcc33;
  --accent2:#2dd5ff;
  --border:#ffffff33;
  --text:#f7fbff;
  --muted:#a7b4c7;
  --danger:#ff4d6a;
}

/* Cel√© pozad√≠ jen pro test ‚Äì na GitHubu klidnƒõ vyhoƒè */
body{
  margin:0;
  padding:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#13233c,#050814 55%);
  font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
}

/* ==== FIS rohov√° grafika ==== */
.fis-overlay{
  position:fixed;
  top:1.5rem;
  left:1.5rem;
  width:420px;
  max-width:calc(100% - 3rem);
  padding:0.9rem 1rem 0.9rem 1rem;
  background:linear-gradient(135deg,rgba(8,12,32,0.96),rgba(10,20,48,0.96));
  border-radius:18px;
  box-shadow:0 18px 45px rgba(0,0,0,0.6);
  border:1px solid var(--border);
  box-sizing:border-box;
  opacity:0;
  transform:translateY(-10px);
  pointer-events:none;
}

/* Fade in / out cel√© karty */
.fis-overlay.show{
  animation:fisFadeIn 0.7s ease-out forwards;
}
.fis-overlay.fade-out{
  animation:fisFadeOut 0.6s ease-in forwards;
}

@keyframes fisFadeIn{
  from{opacity:0;transform:translateY(-10px) scale(0.97);}
  to{opacity:1;transform:translateY(0) scale(1);}
}
@keyframes fisFadeOut{
  from{opacity:1;transform:translateY(0) scale(1);}
  to{opacity:0;transform:translateY(-6px) scale(0.97);}
}

/* Hlaviƒçka */
.fis-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:0.35rem;
}

.fis-event{
  display:flex;
  align-items:center;
  gap:0.4rem;
}

.fis-race-name{
  font-size:1.1rem;
  font-weight:800;
  letter-spacing:0.05em;
  text-transform:uppercase;
}

.fis-flag{
  font-size:1.3rem;
  filter:drop-shadow(0 0 4px rgba(0,0,0,0.6));
}

.fis-course-name{
  font-size:0.82rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.12em;
  color:var(--muted);
}

.fis-tag{
  font-size:0.7rem;
  padding:0.15rem 0.45rem;
  border-radius:999px;
  border:1px solid #ffffff33;
  text-transform:uppercase;
  letter-spacing:0.12em;
  color:var(--muted);
}

/* Hlavn√≠ ƒç√°st: grafika + statistiky */
.fis-main{
  display:grid;
  grid-template-columns:140px 1fr;
  gap:0.7rem;
  align-items:stretch;
}

/* Grafick√° ƒç√°st (mapa / profil) */
.fis-graphic{
  position:relative;
  aspect-ratio:4/5;
  border-radius:16px;
  overflow:hidden;
  background:radial-gradient(circle at 30% 0%,#23385d,#060a16);
  border:1px solid #ffffff22;
}

.fis-graphic svg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  transition:opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
}

.fis-graphic svg#profile-shape{
  opacity:0;
  transform:translateY(8px);
}

.fis-graphic.profile-mode svg#map-shape{
  opacity:0;
  transform:translateY(-8px);
}
.fis-graphic.profile-mode svg#profile-shape{
  opacity:1;
  transform:translateY(0);
}

/* Mal√© labely v grafice */
.map-label{
  font-size:7px;
  fill:#d6e3ff;
  opacity:0.9;
}
.map-label-strong{
  font-weight:700;
  fill:#ffffff;
}

/* Statistika pod sebou jako ve FIS */
.fis-stats{
  display:grid;
  gap:0.25rem;
  margin-top:0.1rem;
}

.stat-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:0.8rem;
  opacity:0;
  transform:translateX(4px);
}

/* postupn√© zobrazov√°n√≠ ≈ô√°dk≈Ø */
.stat-row.show{
  animation:statFadeIn 0.45s ease-out forwards;
}

@keyframes statFadeIn{
  from{opacity:0;transform:translateX(4px);}
  to{opacity:1;transform:translateX(0);}
}

.stat-label{
  display:flex;
  align-items:center;
  gap:0.35rem;
  color:var(--muted);
}

.stat-dot{
  width:9px;
  height:9px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#fff,var(--accent2));
  box-shadow:0 0 6px rgba(0,255,255,0.4);
}

.stat-dot.red{
  background:radial-gradient(circle at 30% 30%,#fff,var(--danger));
  box-shadow:0 0 6px rgba(255,77,106,0.5);
}
.stat-dot.gold{
  background:radial-gradient(circle at 30% 30%,#fff,var(--accent));
  box-shadow:0 0 6px rgba(255,204,51,0.4);
}

.stat-value{
  font-weight:600;
  color:var(--text);
}

/* Spodn√≠ ≈ô√°dek ‚Äì poƒças√≠ */
.fis-footer{
  margin-top:0.55rem;
  border-top:1px solid #ffffff22;
  padding-top:0.35rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:0.75rem;
}

.wx-block{
  display:flex;
  gap:0.7rem;
}

.wx-location{
  display:flex;
  align-items:center;
  gap:0.32rem;
  font-size:0.78rem;
}

.wx-label{
  text-transform:uppercase;
  letter-spacing:0.1em;
  font-size:0.65rem;
  color:var(--muted);
}

/* heptagon ikony poƒças√≠ */
.wx-icon{
  width:24px;
  height:24px;
  position:relative;
  flex:0 0 auto;
  background:linear-gradient(145deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02));
  border:1px solid #ffffff33;
  clip-path:polygon(
    50% 0%,
    83% 12%,
    100% 42%,
    90% 75%,
    60% 100%,
    27% 90%,
    7% 60%,
    10% 27%
  );
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 0 8px rgba(0,0,0,0.6);
}

.wx-icon svg{
  width:75%;
  height:75%;
  display:none;
}

.wx-icon.sunny .icon-sun,
.wx-icon.partly .icon-partly,
.wx-icon.cloudy .icon-cloud,
.wx-icon.rain .icon-rain,
.wx-icon.snow .icon-snow{
  display:block;
}

/* barvy SVG ikonek ‚Äì ƒçistƒõ b√≠l√© */
.wx-icon svg path,
.wx-icon svg circle{
  fill:#ffffff;
  stroke:#ffffff;
}

.wx-temp{
  font-weight:600;
  min-width:3.1rem;
}

/* Mal√Ω pruh FIS stylu naho≈ôe */
.fis-top-bar{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.fis-top-bar::before{
  content:"";
  position:absolute;
  top:-1px;
  left:-1px;
  width:110px;
  height:3px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  box-shadow:0 0 12px rgba(0,0,0,0.9);
  border-radius:999px;
}

/* Mini doplnƒõk ‚Äì typ z√°vodu */
.fis-discipline{
  font-size:0.7rem;
  text-transform:uppercase;
  letter-spacing:0.16em;
  color:#d0defa;
}

/* Responsivn√≠ √∫pravy */
@media (max-width:480px){
  .fis-overlay{
    left:0.75rem;
    right:0.75rem;
    width:auto;
  }
  .fis-main{
    grid-template-columns:120px 1fr;
  }
}
</style>
</head>
<body>

<div class="fis-overlay" id="fisOverlay">
  <div class="fis-top-bar"></div>

  <div class="fis-header">
    <div>
      <div class="fis-event">
        <span class="fis-race-name">Mon√≠nec</span>
        <span class="fis-flag" aria-label="ƒåesk√° republika">üá®üáø</span>
      </div>
      <div class="fis-course-name">Velk√° sjezdovka</div>
      <div class="fis-discipline">Slalom ‚Äì TV profil trati</div>
    </div>
    <div>
      <span class="fis-tag">Course data</span>
    </div>
  </div>

  <div class="fis-main">
    <!-- GRAFIKA: mapa / profil -->
    <div class="fis-graphic" id="graphicBox">
      <!-- Mapa trati (styl FIS) -->
      <svg id="map-shape" viewBox="0 0 120 150" xmlns="http://www.w3.org/2000/svg">
        <!-- tmav√© pozad√≠ -->
        <defs>
          <linearGradient id="bgGradient" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#172338"/>
            <stop offset="100%" stop-color="#050715"/>
          </linearGradient>
          <linearGradient id="courseGradient" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#2dd5ff"/>
            <stop offset="100%" stop-color="#ffcc33"/>
          </linearGradient>
        </defs>

        <rect x="0" y="0" width="120" height="150" fill="url(#bgGradient)"/>

        <!-- Kontura svahu -->
        <path d="M20 15 L 95 40 L 105 80 L 75 130 L 25 140 Z"
              fill="#0c1425" stroke="#2c3f62" stroke-width="1.3" opacity="0.9"/>

        <!-- Linie trati -->
        <path d="M30 18
                 Q 70 30 88 55
                 T 90 90
                 Q 80 115 50 135"
              fill="none" stroke="url(#courseGradient)" stroke-width="3.2"
              stroke-linecap="round"/>

        <!-- start / c√≠l -->
        <circle cx="30" cy="18" r="3.2" fill="#2dd5ff"/>
        <circle cx="50" cy="135" r="3.2" fill="#ffcc33"/>

        <!-- labely -->
        <text x="34" y="16" class="map-label map-label-strong">START</text>
        <text x="54" y="138" class="map-label map-label-strong">C√çL</text>

        <!-- nejstrmƒõj≈°√≠ ƒç√°st -->
        <circle cx="86" cy="70" r="2.4" fill="#ff4d6a"/>
        <text x="64" y="68" class="map-label">NEJSTRMƒöJ≈†√ç</text>
        <text x="64" y="76" class="map-label">ƒå√ÅST</text>
      </svg>

      <!-- Profil trati (v√Ω≈°kov√Ω) -->
      <svg id="profile-shape" viewBox="0 0 120 150" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="profileBg" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#111b2f"/>
            <stop offset="100%" stop-color="#050713"/>
          </linearGradient>
          <linearGradient id="profileLine" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#2dd5ff"/>
            <stop offset="100%" stop-color="#ffcc33"/>
          </linearGradient>
        </defs>

        <rect x="0" y="0" width="120" height="150" fill="url(#profileBg)"/>

        <!-- osa -->
        <line x1="18" y1="20" x2="18" y2="135" stroke="#273552" stroke-width="1"/>
        <line x1="18" y1="135" x2="112" y2="135" stroke="#273552" stroke-width="1"/>

        <!-- v√Ω≈°kov√Ω profil (stylizovan√Ω) -->
        <path d="M18 35
                 C 40 40, 60 55, 80 80
                 S 110 125, 112 135"
              fill="none" stroke="url(#profileLine)" stroke-width="3"
              stroke-linecap="round"/>

        <!-- plocha pod k≈ôivkou -->
        <path d="M18 135
                 L 18 35
                 C 40 40, 60 55, 80 80
                 S 110 125, 112 135
                 Z"
              fill="url(#profileLine)" opacity="0.13"/>

        <!-- znaƒçky v√Ω≈°ky (jen styl) -->
        <text x="22" y="40" class="map-label">+210 m</text>
        <text x="22" y="135" class="map-label">0 m</text>

        <!-- d√©lka -->
        <text x="54" y="147" class="map-label map-label-strong">1 070 m</text>
      </svg>
    </div>

    <!-- Statistika -->
    <div class="fis-stats">
      <div class="stat-row" data-delay="0.4">
        <div class="stat-label">
          <span class="stat-dot gold"></span>
          <span>D√©lka trati</span>
        </div>
        <div class="stat-value">1 070 m</div>
      </div>

      <div class="stat-row" data-delay="0.7">
        <div class="stat-label">
          <span class="stat-dot"></span>
          <span>P≈ôev√Ω≈°en√≠</span>
        </div>
        <div class="stat-value">210 m</div>
      </div>

      <div class="stat-row" data-delay="1.0">
        <div class="stat-label">
          <span class="stat-dot"></span>
          <span>Pr≈Ømƒõrn√Ω sklon</span>
        </div>
        <div class="stat-value">18&nbsp;%</div>
      </div>

      <div class="stat-row" data-delay="1.3">
        <div class="stat-label">
          <span class="stat-dot red"></span>
          <span>Max. sklon</span>
        </div>
        <div class="stat-value">31&nbsp;%</div>
      </div>

      <div class="stat-row" data-delay="1.6">
        <div class="stat-label">
          <span class="stat-dot"></span>
          <span>Min. sklon</span>
        </div>
        <div class="stat-value">7&nbsp;%</div>
      </div>

      <div class="stat-row" data-delay="1.9">
        <div class="stat-label">
          <span class="stat-dot"></span>
          <span>Poƒçet bran</span>
        </div>
        <div class="stat-value">69 / 68</div>
      </div>
    </div>
  </div>

  <!-- Poƒças√≠ -->
  <div class="fis-footer">
    <div class="wx-block">
      <div class="wx-location">
        <div class="wx-label">Start</div>
        <div class="wx-icon" id="wxIconStart">
          <!-- slunce -->
          <svg class="icon-sun" viewBox="0 0 32 32">
            <circle cx="16" cy="16" r="7"/>
            <path d="M16 3 L16 9 M16 23 L16 29 M3 16 L9 16 M23 16 L29 16
                     M7 7 L10.5 10.5 M21.5 21.5 L25 25
                     M7 25 L10.5 21.5 M21.5 10.5 L25 7" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
          <!-- polojasno -->
          <svg class="icon-partly" viewBox="0 0 32 32">
            <circle cx="11" cy="12" r="5"/>
            <path d="M16 18c1.2-1.6 3.1-2.6 5.2-2.6 3.7 0 6.8 3 6.8 6.6 0 2.1-1 3.9-2.7 5H10c-2.4 0-4.4-1.9-4.4-4.3 0-2.3 1.9-4.2 4.3-4.3" stroke-linejoin="round" stroke-width="2" fill="none"/>
          </svg>
          <!-- oblaƒçno -->
          <svg class="icon-cloud" viewBox="0 0 32 32">
            <path d="M9 24c-2.3 0-4.2-1.8-4.2-4.1 0-2 1.4-3.7 3.4-4.1 0.5-3.3 3.3-5.8 6.7-5.8 3.3 0 6.1 2.3 6.7 5.4 2.3 0.2 4.1 2.1 4.1 4.5 0 2.5-2 4.6-4.6 4.6H9z" />
          </svg>
          <!-- d√©≈°≈• -->
          <svg class="icon-rain" viewBox="0 0 32 32">
            <path d="M8 20c-2 0-3.6-1.6-3.6-3.6 0-1.8 1.3-3.3 3.1-3.6 0.5-3 3-5.3 6.1-5.3 3 0 5.5 2.1 6.1 4.9 2.1 0.2 3.8 1.9 3.8 4.1 0 2.3-1.8 4.1-4.1 4.1H8z"/>
            <path d="M11 23 L9.5 27 M16 23 L14.5 27 M21 23 L19.5 27" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
          <!-- sn√≠h -->
          <svg class="icon-snow" viewBox="0 0 32 32">
            <path d="M16 7 L16 25 M10 11 L22 21 M22 11 L10 21" stroke-width="2" stroke-linecap="round" fill="none"/>
            <circle cx="16" cy="16" r="3"/>
          </svg>
        </div>
        <div class="wx-temp" id="tempStart">--¬∞C</div>
      </div>

      <div class="wx-location">
        <div class="wx-label">C√≠l</div>
        <div class="wx-icon" id="wxIconFinish">
          <!-- stejn√© ikony jako v√Ω≈°e -->
          <svg class="icon-sun" viewBox="0 0 32 32">
            <circle cx="16" cy="16" r="7"/>
            <path d="M16 3 L16 9 M16 23 L16 29 M3 16 L9 16 M23 16 L29 16
                     M7 7 L10.5 10.5 M21.5 21.5 L25 25
                     M7 25 L10.5 21.5 M21.5 10.5 L25 7" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
          <svg class="icon-partly" viewBox="0 0 32 32">
            <circle cx="11" cy="12" r="5"/>
            <path d="M16 18c1.2-1.6 3.1-2.6 5.2-2.6 3.7 0 6.8 3 6.8 6.6 0 2.1-1 3.9-2.7 5H10c-2.4 0-4.4-1.9-4.4-4.3 0-2.3 1.9-4.2 4.3-4.3" stroke-linejoin="round" stroke-width="2" fill="none"/>
          </svg>
          <svg class="icon-cloud" viewBox="0 0 32 32">
            <path d="M9 24c-2.3 0-4.2-1.8-4.2-4.1 0-2 1.4-3.7 3.4-4.1 0.5-3.3 3.3-5.8 6.7-5.8 3.3 0 6.1 2.3 6.7 5.4 2.3 0.2 4.1 2.1 4.1 4.5 0 2.5-2 4.6-4.6 4.6H9z" />
          </svg>
          <svg class="icon-rain" viewBox="0 0 32 32">
            <path d="M8 20c-2 0-3.6-1.6-3.6-3.6 0-1.8 1.3-3.3 3.1-3.6 0.5-3 3-5.3 6.1-5.3 3 0 5.5 2.1 6.1 4.9 2.1 0.2 3.8 1.9 3.8 4.1 0 2.3-1.8 4.1-4.1 4.1H8z"/>
            <path d="M11 23 L9.5 27 M16 23 L14.5 27 M21 23 L19.5 27" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
          <svg class="icon-snow" viewBox="0 0 32 32">
            <path d="M16 7 L16 25 M10 11 L22 21 M22 11 L10 21" stroke-width="2" stroke-linecap="round" fill="none"/>
            <circle cx="16" cy="16" r="3"/>
          </svg>
        </div>
        <div class="wx-temp" id="tempFinish">--¬∞C</div>
      </div>
    </div>
  </div>
</div>

<script>
// ===== ƒåASOV√ÅN√ç ANIMACE =====
const overlay = document.getElementById('fisOverlay');
const graphicBox = document.getElementById('graphicBox');
const statRows = Array.from(document.querySelectorAll('.stat-row'));

// Start animace po naƒçten√≠
window.addEventListener('load', () => {
  // fade-in cel√© karty
  overlay.classList.add('show');

  // postupn√© zobrazov√°n√≠ ≈ô√°dk≈Ø
  statRows.forEach(row => {
    const delay = parseFloat(row.dataset.delay || '0');
    setTimeout(() => row.classList.add('show'), delay * 1000);
  });

  // po 5 s zmƒõna mapy -> profil
  setTimeout(() => {
    graphicBox.classList.add('profile-mode');
  }, 5000);

  // po 10 s fade-out cel√© karty
  setTimeout(() => {
    overlay.classList.add('fade-out');
  }, 10000);
});

// ===== POƒåAS√ç ‚Äì Open-Meteo API =====
async function fetchWeather(lat, lon){
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&forecast_days=1&timezone=auto`;
  try{
    const res = await fetch(url);
    if(!res.ok) throw new Error('HTTP ' + res.status);
    const data = await res.json();
    return {
      temp: data.current?.temperature_2m,
      code: data.current?.weather_code
    };
  }catch(e){
    console.error('Chyba p≈ôi naƒç√≠t√°n√≠ poƒças√≠', e);
    return null;
  }
}

// mapov√°n√≠ WMO k√≥du ‚Üí typ ikony
function mapCodeToIcon(code){
  if(code === undefined || code === null) return 'cloudy';
  if(code === 0) return 'sunny'; // jasno
  if([1,2].includes(code)) return 'partly'; // polojasno
  if([3,45,48].includes(code)) return 'cloudy'; // zata≈æeno / mlha

  // snƒõ≈æen√≠
  if((code >= 71 && code <= 77) || code === 85 || code === 86) return 'snow';

  // d√©≈°≈• / p≈ôeh√°≈àky
  if((code >= 51 && code <= 67) || (code >= 80 && code <= 82) || (code >= 95 && code <= 99)){
    return 'rain';
  }

  return 'cloudy';
}

function applyWeather(elIcon, elTemp, data){
  if(!data){ 
    elTemp.textContent = '--¬∞C';
    elIcon.className = 'wx-icon cloudy';
    return;
  }
  const t = Math.round(data.temp);
  elTemp.textContent = `${t}¬∞C`;
  const icon = mapCodeToIcon(data.code);
  elIcon.className = 'wx-icon ' + icon;
}

// Start = 49.5432081N, 14.5113658E
// C√≠l  = 49.5500447N, 14.5211678E
const wxIconStart  = document.getElementById('wxIconStart');
const wxIconFinish = document.getElementById('wxIconFinish');
const tempStart    = document.getElementById('tempStart');
const tempFinish   = document.getElementById('tempFinish');

(async () => {
  const [startWx, finishWx] = await Promise.all([
    fetchWeather(49.5432081, 14.5113658),
    fetchWeather(49.5500447, 14.5211678)
  ]);
  applyWeather(wxIconStart, tempStart, startWx);
  applyWeather(wxIconFinish, tempFinish, finishWx);
})();
</script>

</body>
</html>

