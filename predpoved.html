<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Předpověď počasí – Meteostanice Staré Podlesí</title>
<style>
/* ---- ZÁKLAD ---- */
body{
    background:linear-gradient(to right,#00bcd4,#ffffff);
    font-family:Arial,sans-serif;
    color:#333;
    margin:0;
}
header{
    text-align:center;
    padding:20px 10px;
}
header h1{
    margin:5px 0 10px;
    color:#00796b;
    font-size:2.2em;
}

/* ---- AKTUÁLNÍ POČASÍ ---- */
#current{
    max-width:600px;
    margin:10px auto 30px;
    background:#fff;
    border-radius:15px;
    padding:20px;
    text-align:center;
    box-shadow:0 6px 12px rgba(0,0,0,0.2);
}
#current h2{
    margin-top:0;
    color:#00796b;
}
#current img{
    width:80px;
    height:80px;
}

/* ---- PŘEDPOVĚĎ ---- */
#forecast{
    max-width:1000px;
    margin:20px auto;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:20px;
    padding:0 10px;
}
.day{
    background:#fff;
    border-radius:15px;
    padding:15px;
    text-align:center;
    box-shadow:0 6px 12px rgba(0,0,0,0.2);
    transition:transform .2s;
}
.day:hover{transform:scale(1.05);}
.day h3{
    margin-top:0;
    color:#00796b;
    font-size:1.2em;
}
.day img{
    width:64px;
    height:64px;
}

/* ---- RESPONSIVE ---- */
@media (max-width:600px){
    header h1{font-size:1.6em;}
    .day h3{font-size:1.1em;}
}
</style>
</head>
<body>

<header>
    <h1>Meteostanice Staré Podlesí – Počasí</h1>
</header>

<!-- Aktuální počasí -->
<div id="current">Načítám aktuální počasí…</div>

<!-- Týdenní předpověď -->
<div id="forecast">Načítám předpověď…</div>

<script>
const API_KEY = "973fb2f7fb1a423193b170124251609";
const LAT = 49.69054;
const LON = 13.9811761;

// ---------- Funkce pro formát data ----------
function formatDay(dateStr){
    const d = new Date(dateStr);
    const den = d.toLocaleDateString("cs-CZ",{weekday:"long"});
    const datum = d.toLocaleDateString("cs-CZ",{day:"numeric", month:"numeric"});
    return `${den} – ${datum}`;
}

// ---------- Načtení dat ----------
fetch(`https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${LAT},${LON}&days=7&aqi=no&alerts=no&lang=cs`)
  .then(resp => {
      if(!resp.ok) throw new Error("HTTP error " + resp.status);
      return resp.json();
  })
  .then(data => {
    // --- Aktuální počasí ---
    const c = data.current;
    const loc = data.location;
    document.getElementById("current").innerHTML = `
        <h2>Aktuální počasí (${loc.name})</h2>
        <img src="https:${c.condition.icon}" alt="${c.condition.text}">
        <p><strong>${c.condition.text}</strong></p>
        <p>🌡️ <strong>${c.temp_c} °C</strong></p>
        <p>💧 Vlhkost: <strong>${c.humidity}%</strong></p>
        <p>💨 Vítr: <strong>${c.wind_kph} km/h</strong> (${c.wind_dir})</p>
        <p>🌡️ Tlak: <strong>${c.pressure_mb} hPa</strong></p>
    `;

    // --- Týdenní předpověď ---
    const fc = data.forecast.forecastday;
    const container = document.getElementById("forecast");
    container.innerHTML = fc.map(day => {
      const max = Math.round(day.day.maxtemp_c);
      const min = Math.round(day.day.mintemp_c);
      const cond = day.day.condition;
      return `
        <div class="day">
          <h3>${formatDay(day.date)}</h3>
          <img src="https:${cond.icon}" alt="${cond.text}">
          <p><strong>${cond.text}</strong></p>
          <p>Max: <strong>${max} °C</strong></p>
          <p>Min: <strong>${min} °C</strong></p>
          <p>💧 Pravděpodobnost deště: <strong>${day.day.daily_chance_of_rain} %</strong></p>
        </div>`;
    }).join("");
  })
  .catch(err => {
    document.getElementById("forecast").textContent = "Chyba při načítání předpovědi.";
    document.getElementById("current").textContent = "Chyba při načítání aktuálního počasí.";
    console.error(err);
  });
</script>

</body>
</html>
